version: 2

models:
  - name: stg_flex__facility_transfer
    description: |
      Table for merging visits with multiple `visit_ids`.
      - Multiple visits are identified where the total count of records per visit number exceeds one.
      - Main query identifies first activation and admission time, admission source, discharge details and discharge time.

    columns:
      - name: visit_id
        description: visit_id associated with visit_number
      - name: visit_number
        description: visit_number for flex visit
      - name: person_source_value
        description: patient_id from flex
      - name: visit_type_id
        description: visit_type_id associated with visit_id
      - name: visit_status_id
        description: visit_status_id associated with visit_id
      - name: total_activations
        description: total number of activations per visit_number
      - name: total_entries
        description: total records per visit_number
      - name: visit_activation_sequence_number
        description: sequence of visit activations
      - name: activation_sequence_number
        description: sequence of visit activations
      - name: first_visit_id
        description: fist visit_id associated with each visit_number
      - name: first_attending_emp_provider_id
        description: first provider associated with the visit_number
      - name: first_facility
        description: first facility associated with the visit_number
      - name: first_admission_source
        description: first source of admission associated with the visit_number
      - name: last_discharge_type
        description: last discharge type associated with the visit_number
      - name: last_discharge_dest
        description: last discharge destination associated with the visit_number
      - name: earliest_activation_time
        description: first activation time associated with the visit_number
      - name: earliest_admission_time
        description: first admission time associated with the visit_number
      - name: latest_discharge_time
        description: last discharge time associated with the visit_number
      - name: last_edit_time
        description: last_edit_time for visit_id
      - name: updated_at
        description: generated at time of table creation
