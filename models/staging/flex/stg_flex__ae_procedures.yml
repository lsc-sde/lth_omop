version: 2
models:
  - name: stg_flex__ae_procedures
    description: |
      Brings data through from src_flex__ae_procedures.
      
      Uses CROSS APPLY STRING_SPLIT to split the procedure string into one row per procedure per visit_id.

    columns:
      - name: visit_id
        description: visit_id for each row
      - name: patient_id
        description: flex patient_id for each row
      - name: provider_id
        description: provider_id associated with each visit_id
      - name: activation_time
        description: time of visit activation
      - name: admission_date_time
        description: time of visit admission - may be inpatient admission time if patient admitted
      - name: discharge_date_time
        description: time of visit discharge - may be inpatient discharge time if patient admitted
      - name: last_edit_time
        description: last edit time for each visit
      - name: updated_at
        description: generated at time of table creation
      - name: procedure_datetime
        description: date time of procedure extracted from procedure_list string
      - name: list
        description: procedures associated with visit
